function wpseo_show_map(a,b,c,d,e,f,g,h,i,j,k){var l=new google.maps.LatLngBounds,m=new google.maps.LatLng(c,d),n=480;markers[b]=[];var o={zoom:e,minZoom:1,mapTypeControl:!0,zoomControl:g,streetViewControl:!0,mapTypeId:google.maps.MapTypeId[f.toUpperCase()],scrollwheel:g&&window.innerWidth>n};if(checkForTouch()?o.gestureHandling=h?"auto":"none":o.draggable=h,-1==e){for(var p=0;p<a.length;p++){var q=new google.maps.LatLng(a[p].lat,a[p].long);l.extend(q)}m=l.getCenter()}o.center=m;var r=new google.maps.Map(document.getElementById("map_canvas"+(0!=b?"_"+b:"")),o);-1==e&&r.fitBounds(l);for(var s=new google.maps.InfoWindow({content:t}),p=0;p<a.length;p++){var t=getInfoBubbleText(a[p].name,a[p].address,a[p].country,a[p].show_country,a[p].phone,a[p].phone_2nd,a[p].url,a[p].show_url,a[p].email,a[p].show_email),q=new google.maps.LatLng(a[p].lat,a[p].long),u=a[p].custom_marker,v=a[p].categories;markers[b][p]=new google.maps.Marker({position:q,center:m,map:r,map_id:b,html:t,draggable:Boolean(j),icon:void 0!==u&&u||"",categories:void 0!==v&&v||""})}for(var p=0;p<markers[b].length;p++){var w=markers[b][p];google.maps.event.addListener(w,"click",function(){s.setContent(this.html),s.open(r,this)}),google.maps.event.addListener(s,"closeclick",function(){r.setCenter(this.getPosition())}),google.maps.event.addListener(w,"dragend",function(a){document.getElementById("wpseo_coordinates_lat")&&document.getElementById("wpseo_coordinates_long")&&(document.getElementById("wpseo_coordinates_lat").value=a.latLng.lat(),document.getElementById("wpseo_coordinates_long").value=a.latLng.lng()),document.getElementById("location_coords_lat")&&document.getElementById("location_coords_long")&&(document.getElementById("location_coords_lat").value=a.latLng.lat(),document.getElementById("location_coords_long").value=a.latLng.lng())})}return k&&new MarkerClusterer(r,markers[b],{imagePath:wpseo_local_data.marker_cluster_image_path}),1==markers[b].length&&i&&(s.setContent(markers[b][0].html),s.open(r,w)),r}function checkForTouch(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}function wpseo_get_directions(a,b,c,d){var e="";return d&&b.length>=1&&(e=new google.maps.DirectionsRenderer,e.setMap(a),e.setPanel(document.getElementById("directions"+(0!=c?"_"+c:"")))),e}function getInfoBubbleText(a,b,c,d,e,f,g,h,i,j){var k='<div class="wpseo-info-window-wrapper">',l=!1;return void 0!=g&&""!=wpseo_local_data.has_multiple_locations&&g!=window.location.href&&(l=!0),l&&(k+='<a href="'+g+'">'),k+="<strong>"+a+"</strong>",l&&(k+="</a>"),k+="<br>",k+=b,d&&""!=c&&(k+=c+"<br>"),h&&""!=g&&(k+='<a href="'+g+'">'+g+"</a><br>"),j&&""!=i&&(k+='<a href="mailto:'+i+'">'+i+"</a><br>"),""!=e&&(k+='<a href="tel:'+e+'">'+e+"<br>"),""!=f&&(k+='<a href="tel:'+f+'">'+f+"<br>"),k+="</div>"}function wpseo_calculate_route(a,b,c,d,e){null!=document.getElementById("wpseo-sl-coords-lat")&&(c=document.getElementById("wpseo-sl-coords-lat").value),null!=document.getElementById("wpseo-sl-coords-long")&&(d=document.getElementById("wpseo-sl-coords-long").value);var f=document.getElementById("origin"+(0!=e?"_"+e:"")).value+" "+wpseo_local_data.default_country,g=google.maps.UnitSystem.METRIC;"IMPERIAL"==wpseo_local_data.unit_system&&(g=google.maps.UnitSystem.IMPERIAL);for(var h=0;h<markers.length;h++)markers[h].setMap(null);if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var i="https://maps.google.com/maps?saddr="+escape(f)+"&daddr="+c+","+d;return window.open(i,"_blank"),!1}var j=new google.maps.LatLng(c,d),k={origin:f,destination:j,provideRouteAlternatives:!0,optimizeWaypoints:!0,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:g};(new google.maps.DirectionsService).route(k,function(a,c){if(c==google.maps.DirectionsStatus.OK)b.setDirections(a);else if(c==google.maps.DirectionsStatus.ZERO_RESULTS){var d=document.getElementById("wpseo-noroute");d.setAttribute("style","clear: both; display: block;")}})}function wpseo_sl_show_route(a,b,c){$=jQuery,$(".wpseo-sl-coords").remove();var d='<input type="hidden" class="wpseo-sl-coords" id="wpseo-sl-coords-lat" value="'+b+'">';d+='<input type="hidden" class="wpseo-sl-coords" id="wpseo-sl-coords-long" value="'+c+'">',$("#wpseo-directions-form").append(d).submit(),$("#wpseo-directions-wrapper").slideUp(function(){$(this).insertAfter($(a).parents(".wpseo-result")).slideDown()})}function wpseo_detect_location(a){var b=document.getElementById("wpseo-sl-search");if(null==b&&(b=document.getElementById("origin")),navigator.geolocation&&null!=b){var c=a.target||a.srcElement,d=c.getAttribute("src"),e=c.getAttribute("alt"),f=c.getAttribute("data-loading-text");c.setAttribute("src",wpseo_local_data.adminurl+"images/loading.gif"),c.setAttribute("alt",f),navigator.geolocation.getCurrentPosition(function(a){var f=new google.maps.Geocoder,g={lat:parseFloat(a.coords.latitude),lng:parseFloat(a.coords.longitude)};f.geocode({location:g},function(a,f){f===google.maps.GeocoderStatus.OK&&a.length>0&&""==b.value&&(b.value=a[0].formatted_address),c.setAttribute("src",d),c.setAttribute("alt",e)})},function(a){var b="[wpseo] Error detecting location: ";switch(a.code){case a.TIMEOUT:b+="Timeout";break;case a.POSITION_UNAVAILABLE:b+="Position unavailable";break;case a.PERMISSION_DENIED:b+="Permission denied";break;case a.UNKNOWN_ERROR:b+="Unknown error"}"undefined"!=typeof console&&console.log(b),c.setAttribute("src",d),c.setAttribute("alt",e)})}}function filterMarkers(a,b){for(i=0;i<markers[b].length;i++)marker=markers[b][i],marker.categories.hasOwnProperty(a)||0===a.length?marker.setVisible(!0):marker.setVisible(!1)}/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MarkerClusterer(a,b,c){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=a,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var d=c||{};this.gridSize_=d.gridSize||60,this.minClusterSize_=d.minimumClusterSize||2,this.maxZoom_=d.maxZoom||null,this.styles_=d.styles||[],this.imagePath_=d.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=d.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=d.zoomOnClick&&(this.zoomOnClick_=d.zoomOnClick),this.averageCenter_=!1,void 0!=d.averageCenter&&(this.averageCenter_=d.averageCenter),this.setupStyles_(),this.setMap(a),this.prevZoom_=this.map_.getZoom();var e=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var a=e.map_.getZoom();e.prevZoom_!=a&&(e.prevZoom_=a,e.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){e.redraw()}),b&&b.length&&this.addMarkers(b,!1)}function Cluster(a){this.markerClusterer_=a,this.map_=a.getMap(),this.gridSize_=a.getGridSize(),this.minClusterSize_=a.getMinClusterSize(),this.averageCenter_=a.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,a.getStyles(),a.getGridSize())}function ClusterIcon(a,b,c){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=b,this.padding_=c||0,this.cluster_=a,this.center_=null,this.map_=a.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}for(var wpseo_directions=[],wpseo_maps=[],markers=new Object,wpseo_current_location_buttons=document.getElementsByClassName("wpseo_use_current_location"),i=0;i<wpseo_current_location_buttons.length;i++)wpseo_current_location_buttons[i].addEventListener("click",function(a){wpseo_detect_location(a)},!1);MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(a,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var a,b=0;a=this.sizes[b];b++)this.styles_.push({url:this.imagePath_+(b+1)+"."+this.imageExtension_,height:a,width:a})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var a,b=this.getMarkers(),c=new google.maps.LatLngBounds,d=0;a=b[d];d++)c.extend(a.getPosition());this.map_.fitBounds(c)},MarkerClusterer.prototype.setStyles=function(a){this.styles_=a},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(a,b){for(var c=0,d=a.length,e=d;0!==e;)e=parseInt(e/10,10),c++;return c=Math.min(c,b),{text:d,index:c}},MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(a,b){for(var c,d=0;c=a[d];d++)this.pushMarkerTo_(c);b||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.isAdded=!1,a.draggable){var b=this;google.maps.event.addListener(a,"dragend",function(){a.isAdded=!1,b.repaint()})}this.markers_.push(a)},MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a),b||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(a){var b=-1;if(this.markers_.indexOf)b=this.markers_.indexOf(a);else for(var c,d=0;c=this.markers_[d];d++)if(c==a){b=d;break}return-1!=b&&(a.setMap(null),this.markers_.splice(b,1),!0)},MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);return!(b||!c)&&(this.resetViewport(),this.redraw(),!0)},MarkerClusterer.prototype.removeMarkers=function(a,b){for(var c,d=!1,e=0;c=a[e];e++){var f=this.removeMarker_(c);d=d||f}if(!b&&d)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(a){this.ready_||(this.ready_=a,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(a){this.map_=a},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(a){this.minClusterSize_=a},MarkerClusterer.prototype.getExtendedBounds=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),e=b.fromLatLngToDivPixel(c);e.x+=this.gridSize_,e.y-=this.gridSize_;var f=b.fromLatLngToDivPixel(d);f.x-=this.gridSize_,f.y+=this.gridSize_;var g=b.fromDivPixelToLatLng(e),h=b.fromDivPixelToLatLng(f);return a.extend(g),a.extend(h),a},MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(a){for(var b,c=0;b=this.clusters_[c];c++)b.remove();for(var d,c=0;d=this.markers_[c];c++)d.isAdded=!1,a&&d.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var b,c=0;b=a[c];c++)b.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(a,b){if(!a||!b)return 0;var c=(b.lat()-a.lat())*Math.PI/180,d=(b.lng()-a.lng())*Math.PI/180,e=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.lat()*Math.PI/180)*Math.cos(b.lat()*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(a){for(var b,c=4e4,d=null,e=(a.getPosition(),0);b=this.clusters_[e];e++){var f=b.getCenter();if(f){var g=this.distanceBetweenPoints_(f,a.getPosition());g<c&&(c=g,d=b)}}if(d&&d.isMarkerInClusterBounds(a))d.addMarker(a);else{var b=new Cluster(this);b.addMarker(a),this.clusters_.push(b)}},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var a,b=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),c=this.getExtendedBounds(b),d=0;a=this.markers_[d];d++)!a.isAdded&&this.isMarkerInBounds_(a,c)&&this.addToClosestCluster_(a)},Cluster.prototype.isMarkerAlreadyAdded=function(a){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(a);for(var b,c=0;b=this.markers_[c];c++)if(b==a)return!0;return!1},Cluster.prototype.addMarker=function(a){if(this.isMarkerAlreadyAdded(a))return!1;if(this.center_){if(this.averageCenter_){var b=this.markers_.length+1,c=(this.center_.lat()*(b-1)+a.getPosition().lat())/b,d=(this.center_.lng()*(b-1)+a.getPosition().lng())/b;this.center_=new google.maps.LatLng(c,d),this.calculateBounds_()}}else this.center_=a.getPosition(),this.calculateBounds_();a.isAdded=!0,this.markers_.push(a);var e=this.markers_.length;if(e<this.minClusterSize_&&a.getMap()!=this.map_&&a.setMap(this.map_),e==this.minClusterSize_)for(var f=0;f<e;f++)this.markers_[f].setMap(null);return e>=this.minClusterSize_&&a.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var a,b=new google.maps.LatLngBounds(this.center_,this.center_),c=this.getMarkers(),d=0;a=c[d];d++)b.extend(a.getPosition());return b},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)},Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var a=this.map_.getZoom(),b=this.markerClusterer_.getMaxZoom();if(b&&a>b)for(var c,d=0;c=this.markers_[d];d++)c.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var e=this.markerClusterer_.getStyles().length,f=this.markerClusterer_.getCalculator()(this.markers_,e);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(f),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(a){var b=this.cluster_.getMarkerClusterer();google.maps.event.trigger(b,"clusterclick",this.cluster_,a),b.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var b=this,c=!1;google.maps.event.addDomListener(this.div_,"click",function(a){c||b.triggerClusterClick(a)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){c=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){c=!0})},ClusterIcon.prototype.getPosFromLatLng_=function(a){var b=this.getProjection().fromLatLngToDivPixel(a);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(b.x-=this.iconAnchor_[0],b.y-=this.iconAnchor_[1]):(b.x-=parseInt(this.width_/2,10),b.y-=parseInt(this.height_/2,10)),b},ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px",this.div_.style.left=a.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(a){this.sums_=a,this.text_=a.text,this.index_=a.index,this.div_&&(this.div_.innerHTML=a.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var a=Math.max(0,this.sums_.index-1);a=Math.min(this.styles_.length-1,a);var b=this.styles_[a];this.url_=b.url,this.height_=b.height,this.width_=b.width,this.textColor_=b.textColor,this.anchor_=b.anchor,this.textSize_=b.textSize,this.backgroundPosition_=b.backgroundPosition,this.iconAnchor_=b.iconAnchor},ClusterIcon.prototype.setCenter=function(a){this.center_=a},ClusterIcon.prototype.createCss=function(a){var b=[];b.push("background-image:url("+this.url_+");");var c=this.backgroundPosition_?this.backgroundPosition_:"0 0";b.push("background-position:"+c+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?b.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?b.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?b.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):b.push("width:"+this.width_+"px; text-align:center;")):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var d=this.textColor_?this.textColor_:"black",e=this.textSize_?this.textSize_:11;return b.push("cursor:pointer; top:"+a.y+"px; left:"+a.x+"px; color:"+d+"; position:absolute; font-size:"+e+"px; font-family:Arial,sans-serif; font-weight:bold"),b.join("")};